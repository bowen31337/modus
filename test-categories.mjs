import { chromium } from '@playwright/test';
async function sleep(ms) { return new Promise(resolve => setTimeout(resolve, ms)); }
async function main() { const browser = await chromium.launch({ headless: true }); const page = await browser.newPage(); console.log('Testing Categories with Admin login...'); await page.goto('http://localhost:3000/login', { waitUntil: 'networkidle', timeout: 30000 }); await page.fill('input[name="email"]', 'admin@example.com'); await page.fill('input[name="password"]', 'admin1234'); await Promise.all([page.waitForNavigation({ waitUntil: 'networkidle', timeout: 30000 }), page.click('button[type="submit"]')]); console.log('After login URL:', page.url()); await page.goto('http://localhost:3000/dashboard/settings', { waitUntil: 'networkidle', timeout: 30000 }); console.log('Settings page URL:', page.url()); const tabCount = await page.getByTestId('tab-categories').count(); console.log('Categories tab visible:', tabCount > 0); if (tabCount > 0) { await page.getByTestId('tab-categories').click(); await sleep(500); const mgmtCount = await page.getByTestId('categories-management').count(); console.log('Categories management found:', mgmtCount > 0); const cards = await page.locator('[data-testid^="category-card-"]').count(); console.log('Existing categories:', cards); await page.getByTestId('create-category-button').click(); await sleep(500); const modalCount = await page.getByTestId('create-category-modal').count(); console.log('Create modal opened:', modalCount > 0); if (modalCount > 0) { await page.fill('[data-testid="create-category-name"]', 'Test Category'); await page.fill('[data-testid="create-category-slug"]', 'test-category'); await page.fill('[data-testid="create-category-description"]', 'Test description'); await page.getByTestId('save-create-category').click(); await sleep(1000); const newCount = await page.locator('[data-testid^="category-card-"]').count(); console.log('Categories after creation:', newCount); console.log(newCount > cards ? '✅ Test passed\!' : '⚠️ Test may have issues'); } } await page.screenshot({ path: 'test-categories.png' }); await browser.close(); console.log('Done\!'); } main().catch(console.error);
